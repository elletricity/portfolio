@import 'partials/uguru/mixin';
@import 'partials/uguru/loader-animation';

//*-- TABLE OF CONTENTS --*/
// base settings
// default
// academic
// baking
// photography
// tech
// household
// animation player
// animation
	// default
	// academic
	// baking
	// photography
	// tech
	// household

// base settings
.portal-transition {
	opacity: 0;
	-webkit-clip-path: circle(95px at 50% 50%);
	clip-path: circle(95px at 50% 50%);
	transform: translate3d(0, 17%, 25px) rotateX(75deg);
	display: flex;
	flex-flow: row wrap;
	align-items: center;
	align-content: center;
	justify-content: center;
	position: absolute;
	z-index: 2;
	top: 0;
	left: 0;
	background: $charcoal;
	overflow: hidden;
	width: 100%;
	height: 100%;
}

.loader-portal-container {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
	display: flex;
	align-items: center;
	align-content: center;
	justify-content: center;
	-webkit-perspective: 1000px;
	perspective: 1000px;
	transform-style: preserve-3d;
}

.loader-portal {
	position: relative;
	width: 100%;
	height: 100%;
	max-height: 350px;
	max-width: 250px;
	display: flex;
	align-items: center;
	align-content: center;
	justify-content: center;
	transform-style: preserve-3d;
	transform-origin: center center;
	overflow: hidden;
	* {
		transform-style: preserve-3d;
		transform-origin: center center;
	}
	.portal {
		position: absolute;
		bottom: 0;
		left: 25px;
		width: 200px;
		height: 200px;
		transform: translate3d(0,37%,25px) rotateX(75deg);
		> div:not(.mask) {
			width: 100%;
			height: 100%;
			transform: matrix3d(0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
			svg {
				circle {
					cursor: pointer;
					stroke-dasharray: 1207;
					stroke-dashoffset: 1207;
				}
			}
		}
	}
	.logo {
		cursor: pointer;
		position: absolute;
		top: 40px;
		left: 60px;
		width: 130px;
		height: 37px;
	}
	.guru {
		position: absolute;
		transform: translate3d(0,50px,0);
		> div {
			width: 100%;
			height: 100%;
		}
	}
}

// default
.loader-portal-container.default {
	background: $slate;
	.loader-portal {
		.guru {
			top: 50px;
			left: 60px;
			width: 130px;
		}
	}
}

// academic
.loader-portal-container.academic {
	background: mix($cerise, white, 30%);
	.loader-portal {
		.guru {
			top: 44px;
			left: 60px;
			width: 130px;
			.back-bp {
				opacity: 0;
				transform-origin: center center;
			}
			.front-bp {
				opacity: 0;
				transform-origin: center top;
			}
		}
	}
	.academic-props {
		position: absolute;
		width: 130px;
		height: 210px;
		left: calc(50% - 65px);
		top: calc(50% - 105px);
		.airplane {
			display: block;
			width: 100%;
			height: auto;
			transform: translate3d(20px, 100px, 0);
			transform-origin: center center;
			opacity: 0;
		}
	}

	.aca-icon {
		position: absolute;
		top: calc(50% - 15px);
		left: calc(50% - 20px);
		background: white;
		padding: 10px 5px;
		border: 2px solid #50A5DD;
		border-radius: 2px;
		transform: rotateY(90deg);
		svg {
			display: block;
			width: 30px;
			height: 30px;
			g {
				stroke-width: 4px;
				stroke: $cerise;
			}
		}
	}
	.close-up {
		transform-origin: center bottom;
		opacity: 0;
		position: absolute;
		width: 650px;
		height: 445px;
		left: 25%;
		top: 50%;
	}
	.flying-plane {
		transform-origin: center bottom;
		opacity: 0;
		position: absolute;
		width: 650px;
		height: 445px;
	}
}

// animation player
.uguru-animation-player {
	position: relative;
	width: 100%;
	max-width: $w;
	height: 600px;
	overflow: hidden;
	border-radius: 2px;
	margin-bottom: 24px;
	.portal-transition {
		visibility: hidden;
	}
	&.pause {
		* {
			animation-play-state: paused!important;
		}
	}
	&.running {
		* {
			animation-play-state: running!important;
		}
	}
	&.play {
		.loader-portal {
			opacity: 0;
			.logo, .guru > div {
				transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 350, 0, 1);
			}
		}
	}
	&.play, &.running, &.pause {
		.portal-transition {
			visibility: visible;
		}
	}
}

// animation
.uguru-animation-player.play {
	// default
	.loader-portal-container.default {
		.loader-portal {
			animation: fadeIn 50ms linear 50ms both;
			.portal {
				animation: portal-flip 900ms ease-out 7500ms forwards;
				> div:not(.mask) {
					animation: portal 1000ms linear 500ms both;
					svg {
						circle {
							animation: progress 3000ms linear 2000ms both;
						}
					}
				}
			}
			.logo {
				animation: move-up 1000ms linear 1000ms both, move-down 1000ms linear 6500ms forwards;
			}
			.guru {
				> div {
					animation: move-up 1000ms linear 1500ms forwards, head-hover 1000ms linear 2500ms 10 forwards, move-down 1000ms linear 6000ms forwards;
				}
			}
		}
		+ .portal-transition {
			animation: warp-flip 900ms ease-out 7500ms forwards, warp-expand 500ms ease-out 9000ms forwards;
		}
	}
	// academic
	.loader-portal-container.academic {
		.loader-portal {
			animation: fadeIn 50ms linear 3000ms both;
			.portal {
				animation: portal-flip 900ms ease-out 12000ms forwards;
				> div:not(.mask) {
					animation: portal 1000ms linear 3000ms both;
					svg {
						circle {
							animation: progress 3000ms linear 3500ms both;
						}
					}
				}
			}
			.logo {
				animation: move-up 1000ms linear 3750ms forwards, move-down 1000ms linear 11000ms forwards;
			}
			.guru {
				> div {
					animation: move-up 1000ms linear 4500ms forwards, head-hover 1000ms linear 5500ms 10 forwards, move-down 1000ms linear 10500ms forwards;
				}
				.back-bp {
					animation: back-bp 500ms ease-in-out 5000ms forwards;
				}
				.front-bp {
					animation: straps 250ms ease-out 5000ms forwards;
				}
			}
		}
		.academic-props {
			.airplane {
				animation: fadeIn 10ms linear 5500ms forwards, airplane-fly-over 1000ms ease-out 5500ms forwards, airplane-fly-return 1500ms ease-in 6400ms forwards, airplane-rotate 1750ms cubic-bezier(.58,-0.11,1,.44) 7900ms forwards;
			}
		}
		.aca-icon {
			animation: paper-rotate-2 500ms ease-out 9650ms forwards;
		}
		.close-up {
			animation: aca-enter 750ms ease-in 500ms forwards, hand-ready 500ms cubic-bezier(.41,-0.34,1,.99) 1250ms forwards, hand-set 250ms cubic-bezier(.41,-0.34,1,.99) 1750ms forwards, hand-out 750ms cubic-bezier(0,.01,.38,1) 2000ms forwards, fadeOut 10ms linear 2750ms forwards;
			.launch-airplane {
				animation: fadeOut 10ms linear 2000ms forwards;
			}
		}
		.flying-plane {
			animation: airplane-fly-right 1000ms cubic-bezier(0,.01,.38,1) 2000ms forwards;
		}
		+ .portal-transition {
			animation: warp-flip 900ms ease-out 12000ms forwards, warp-expand 500ms ease-out 13100ms forwards;
		}
	}
}
